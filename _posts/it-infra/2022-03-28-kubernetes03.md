---
title: "[Infra] 쿠버네티스(kubernetes)(3) 쿠버네티스로 서비스 배포하기" 
categories:
  - it-infra
tags:
  - it-infra
use_math: true
toc: true
toc_label: "My Table of Contents"
toc_icon: "cog"
sidebar:
  title: "AI Machine Learning"
  nav: sidebar-contents
---

# 쿠버네티스로 서비스 배포하기(작성중)

**참고 링크**

* [(0)도커의 개념](https://losskatsu.github.io/it-infra/docker00/)  
* [(1)도커 설치하기, hello world!](https://losskatsu.github.io/it-infra/docker01/)  
* [(2)도커 컨테이너 조작 기초(pull, run, ps)](https://losskatsu.github.io/it-infra/docker02/)  
* [(3)도커 이미지 변경 후 저장(commit)](https://losskatsu.github.io/it-infra/docker03/)  
* [(4)도커 컨테이너 네트워크](https://losskatsu.github.io/it-infra/docker04/)  
* [(5)도커 API 이미지 빌드 및 컨테이너 실행](https://losskatsu.github.io/it-infra/docker05/)
* [(6)도커 컴포즈를 활용한 여러 개의 Flask, Nginx 배포](https://losskatsu.github.io/it-infra/docker06/)
* [(1)쿠버네티스 구조](https://losskatsu.github.io/it-infra/kubernetes01/)  
* [(2)쿠버네티스 설치](https://losskatsu.github.io/it-infra/kubernetes02/)



## 배포할 때 필요한 것

(이 파일은 현재 작성중입니다.)

yaml('야믈'이라고 읽음) 파일 작성

deployment.yml
service.yml

## YAML 파일 작성하기

```
deployment.yaml
```
```bash
 apiVersion: apps/v1
  kind: Deployment
  metadata:
    name: web-deploy
  spec:
    replicas: 3
    selector:
      matchLabels:
        app: web
    template:
      metadata:
        labels:
          app: web
      spec:
        containers:
          - name: nginx-lipaco
            image: living_paradise_nginx
            ports:
              - containerPort: 8004
          - name: flask-lipaco
            image: living_paradise_predict_product_demand
            ports:
              - containerPort: 5004

```



```
serivce.yml
```
```bash
apiVersion: v1
kind: Service
metadata:
  name: web-service
spec:
  type: LoadBalancer
  selector:
    app: web
  ports:
    - protocol: TCP
      port: 8004

```

yaml 파일 작성할 때 주의해야할 점은 들여쓰기 할때, tab 쓰면 안되고 space 써야합니다. 

## 배포

```bash
$ sudo -i
# kubectl apply -f deployment.yml
# kubectl apply -f service.yml
```

## 삭제

```bash
# kubectl delete pod web-deploy
# kubectl delete service web-service
```


