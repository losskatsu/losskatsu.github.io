---
title: "[Infra] 도커(docker)(9) 도커 PostgreSQL 컨테이너 배포하기" 
categories:
  - it-infra
tags:
  - it-infra
use_math: true
toc: true
toc_label: "My Table of Contents"
toc_icon: "cog"
sidebar:
  title: "AI Machine Learning"
  nav: sidebar-contents
---

# 도커(docker)(9) 도커 PostgreSQL 컨테이너 배포하기

**참고 링크**

* [(0)도커의 개념](https://losskatsu.github.io/it-infra/docker00/)  
* [(1)도커 설치하기, hello world!](https://losskatsu.github.io/it-infra/docker01/)  
* [(2)도커 컨테이너 조작 기초(pull, run, ps)](https://losskatsu.github.io/it-infra/docker02/)  
* [(3)도커 이미지 변경 후 저장(commit)](https://losskatsu.github.io/it-infra/docker03/)  
* [(4)도커 컨테이너 네트워크](https://losskatsu.github.io/it-infra/docker04/)  
* [(5)도커 API 이미지 빌드 및 컨테이너 실행](https://losskatsu.github.io/it-infra/docker05/)
* [(6)도커 컴포즈를 활용한 여러 개의 Flask, Nginx 배포](https://losskatsu.github.io/it-infra/docker06/)
* [(7)도커 볼륨을 이용한 데이터 관리](https://losskatsu.github.io/it-infra/docker07/)
* [(8)도커 장고 이미지 살펴보기](https://losskatsu.github.io/it-infra/docker08/)
* [(9)도커 PostgreSQL 컨테이너 배포](https://losskatsu.github.io/it-infra/docker09/)
* [(1)쿠버네티스 구조](https://losskatsu.github.io/it-infra/kubernetes01/)  
* [(2)쿠버네티스 설치](https://losskatsu.github.io/it-infra/kubernetes02/)
* [(3)쿠버네티스 서비스 배포하기](https://losskatsu.github.io/it-infra/kubernetes03/)
* [(4)컨테이너 IP와 파드 IP의 관계](https://losskatsu.github.io/it-infra/kubernetes04/)
* [(5)퍼시스턴트 볼륨 스토리지](https://losskatsu.github.io/it-infra/kubernetes05/)




## 1. 서론  

이번 포스팅에서는 도커를 이용해 PostgreSQL 이미지를 pull 받아 컨테이너로 띄워보겠습니다.


## 2. 이미지 받아서 컨테이너로 띄우기

### 2.1. 도커 허브에서 이미지 pull 받기

```bash
$ docker pull postgres

Using default tag: latest
latest: Pulling from library/postgres
31b3f1ad4ce1: Already exists
dc97844d0cd5: Pull complete
9ad9b1166fde: Pull complete
286c4682b24d: Pull complete
1d3679a4a1a1: Pull complete
5f2e6cdc8503: Pull complete
0f7dc70f54e8: Pull complete
a090c7442692: Pull complete
81bfe40fd0f6: Pull complete
8ac8c22bbb38: Pull complete
96e51d1d3c6e: Pull complete
667bd4154fa2: Pull complete
87267fb600a9: Pull complete
Digest: sha256:b0ee049a2e347f5ec8c64ad225c7edbc88510a9e34450f23c4079a489ce16268
Status: Downloaded newer image for postgres:latest
docker.io/library/postgres:latest
```

위와 같이 도커 허브에서 pull을 받고 도커 이미지를 살펴보겠습니다. 

```bash
$ docker image ls
REPOSITORY           TAG       IMAGE ID       CREATED         SIZE
postgres             latest    75993dd36176   2 weeks ago     376MB
```

이미지를 확인하면 PostgreSQL 이미지가 잘 받아진 것을 알 수 있습니다.

### 2.2. postgre 컨테이너 실행

```bash
$ docker run --name some-postgres -e POSTGRES_PASSWORD=mysecretpassword -d postgres
088f20012019a3be9b47eac2ea11f3811691f33a8100c2dadee0321364e2d7af
```

위 커맨드를 입력하면 컨테이너를 실행할 수 있습니다.

```bash
$ docker container ls
CONTAINER ID   IMAGE      COMMAND                  CREATED         STATUS         PORTS      NAMES
088f20012019   postgres   "docker-entrypoint.s…"   2 minutes ago   Up 2 minutes   5432/tcp   some-postgres
```

### 2.3. 컨테이너 내부 탐험

```bash
~$ docker exec -it 088f20012019 /bin/bash

root@088f20012019:/# psql -U postgres

psql (14.5 (Debian 14.5-1.pgdg110+1))
Type "help" for help.

postgres=# CREATE USER cheolwon PASSWORD '1234' SUPERUSER;
CREATE ROLE

postgres=# CREATE DATABASE test01 OWNER cheolwon;
CREATE DATABASE

postgres=# \c test01 cheolwon
You are now connected to database "test01" as user "cheolwon".

test01=# CREATE TABLE test_table(
    id INTEGER PRIMARY KEY,
    name VARCHAR(20)
);
CREATE TABLE

test01=# \dt
           List of relations
 Schema |    Name    | Type  |  Owner
--------+------------+-------+----------
 public | test_table | table | cheolwon
(1 row)

test01=# SELECT * FROM test_table;
 id | name
----+------
(0 rows)

test01=# INSERT INTO test_table (id, name)
VALUES(
    '1',
    'youngjin'
);
INSERT 0 1

test01=# SELECT * FROM test_table;
 id |   name
----+----------
  1 | youngjin
(1 row)
```

테이블에 값을 한번 넣어봅시다.

